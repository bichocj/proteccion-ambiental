{% extends 'main/layout.html' %}
{% load static %}
{% load i18n %}
{% load main_extras %}
{% block styles %}
    <link rel="stylesheet" href="{% static 'main/css/compiled/index.css' %}" type="text/css" media="screen"/>
{% endblock %}
{% block content %}
    <div id="pad-wrapper">
        <div class="row header">
            <div class="col-md-12">
                <div class="col-md-9">
                    <h3>{{ title }}</h3>
                </div>
                <div class="col-md-3">
                    <h4>
                        <small> Numero de trabajadores: <b>{{ workers_in_month }}</b></small>
                    </h4>
                    <h4>
                        <small>Indice General: <b>{{ indice_general }}</b></small>
                    </h4>
                </div>
            </div>
        </div>
        <div class="col-md-12">
            <h3>Mes {% trans month_label %}</h3>
            <h4 class="">Compañia: {{ company.name }}</h4>
            <a class="btn-flat icon pull-right" id="restore_btn"
               href="{% url 'main:report_update' company_slug month %}">
                <i class="icon-refresh"></i> Actualizar informe
            </a>

        </div>

        {% if index.is_using_sgsst %}
            <div id="main-stats" style="margin-top: 50px;">
                <div class="row stats-row stat">
                    <div class="col-md-12" style="text-align: left;">
                        <h4>
                            Índice de Cumplimiento del SGSST (>=90)
                        </h4>
                        <br>
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th class="col-md-4">
                                    Actividades Plan Trabajo
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Actividades Programadas Plan Trabajo:
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Record
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>{{ values_details|get_by_key:'sgsst'|numerator }}</td>
                                <td>{{ values_details|get_by_key:'sgsst'|denominator }}</td>
                                <td>{{ values_details|get_by_key:'sgsst'|value }}% ICSST</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                </div>
            </div>

        {% endif %}
        {% if index.is_using_legal %}
            <div id="main-stats" style="margin-top: 50px;">
                <div class="row stats-row stat">
                    <div class="col-md-12" style="text-align: left;">
                        <h4>
                            Índice Legal (>=100)
                        </h4>

                        <br>
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th class="col-md-4">
                                    Requisitos Cumplidos :
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Requisitos identificados:
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Record
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>{{ values_details|get_by_key:'legal'|numerator }}</td>
                                <td>{{ values_details|get_by_key:'legal'|denominator }}</td>
                                <td>{{ index_detail.legal }}% ILEG</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                </div>
            </div>


        {% endif %}
        {% if index.is_using_icsst %}
            <div id="main-stats" style="margin-top: 50px;">
                <div class="row stats-row stat">
                    <div class="col-md-12" style="text-align: left;">
                        <h4>
                            Implementación CSST (>=90)
                        </h4>
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th class="col-md-4">
                                    Acuerdos SST implementados:
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Acuerdos SST planificados:
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Record
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>{{ values_details|get_by_key:'icsst' |numerator }}</td>
                                <td>{{ values_details|get_by_key:'icsst'|denominator }}</td>
                                <td>{{ index_detail.icsst }}% ICSST</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                </div>
            </div>
        {% endif %}

        <!-- Solo anual-->
        {% if index.is_using_indice_no_conformidad and month == 12 %}
            <div id="main-stats" style="margin-top: 50px;">
                <div class="row stats-row stat">
                    <div class="col-md-12" style="text-align: left;">
                        <h4>
                            Indice de no Conformidades (>=100)
                        </h4>

                    </div>


                    <div class="col-md-12 field-box">
                        <div class="col-md-2">
                            <label>No Conformidades levantadas:</label>
                        </div>
                        <div class="col-md-3 ">

                            <input id="numerator_indice_no_conformidad" class="form-control" type="number"
                                   value="{{ values_details|get_by_key:'indice_no_conformidad' |numerator }}"/>
                        </div>

                        <div class="field-box">
                            <div class="col-md-2">
                                <label>No Conformidades Identificadas:</label>
                            </div>
                            <div class="col-md-3">
                                <input id="denominator_indice_no_conformidad" class="form-control" type="number"
                                       value="{{ values_details|get_by_key:'indice_no_conformidad'|denominator }}"/>
                            </div>
                        </div>
                        <div class="field-box col-md-2">
                            <button id="indice_no_conformidad_btn" class="btn-flat inverse">Guardar</button>
                        </div>
                    </div>


                    <div class="col-md-12">
                        <div class="col-md-7"></div>
                        <div class="col-md-5 data pull-right">
                            <span class="number" id="indice_no_conformidad_val">{{ index_detail.indice_no_conformidad }}%</span>
                            INC
                        </div>


                    </div>

                </div>
            </div>

        {% endif %}
        {% if index.is_using_medida_iperc and month == 6 %}
            <div id="main-stats" style="margin-top: 50px;">
                <div class="row stats-row stat">
                    <div class="col-md-12" style="text-align: left;">
                        <h4>
                            Indice de Medidas de Control IPERC (>=90)
                        </h4>

                    </div>


                    <div class="col-md-12 field-box">
                        <div class="col-md-2">
                            <label>Controles Implementados:</label>
                        </div>
                        <div class="col-md-3 ">

                            <input id="numerator_medida_iperc" class="form-control" type="number"
                                   value="{{ values_details|get_by_key:'medida_iperc' |numerator }}"/>
                        </div>

                        <div class="field-box">
                            <div class="col-md-2">
                                <label>Controles Programados:</label>
                            </div>
                            <div class="col-md-3">
                                <input id="denominator_medida_iperc" class="form-control" type="number"
                                       value="{{ values_details|get_by_key:'medida_iperc'|denominator }}"/>
                            </div>
                        </div>
                        <div class="field-box col-md-2">
                            <button id="medida_iperc_btn" class="btn-flat inverse">Guardar</button>
                        </div>
                    </div>


                    <div class="col-md-12">
                        <div class="col-md-7"></div>
                        <div class="col-md-5 data pull-right">
                            <span class="number" id="medida_iperc_val">{{ index_detail.medida_iperc }}%</span>
                            IMC
                        </div>


                    </div>

                </div>
            </div>

        {% endif %}
        {% if index.is_using_liderazgo %}
            <div id="main-stats" style="margin-top: 50px;">
                <div class="row stats-row stat">
                    <div class="col-md-12" style="text-align: left;">
                        <h4>
                            Indice Liderazgo Participativo (>=90)
                        </h4>
                        <br>
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th class="col-md-4">
                                    Rol
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>Actividades Preventivas Cumplidas
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>Actividades Preventivas Programadas
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>Record
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for values_detail_lidership in values_details|get_by_key:'lidership__' %}
                                <tr class="first">
                                    <td>
                                        {{ values_detail_lidership.key|clean:'lidership__' }}
                                    </td>
                                    <td>
                                        {{ values_detail_lidership.numerator }}
                                    </td>
                                    <td>
                                        {{ values_detail_lidership.denominator }}
                                    </td>
                                    <td>
                                        {{ values_detail_lidership.value }}%
                                    </td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>


                    {#                    <div class="col-md-12 field-box">#}
                    {#                        <div class="col-md-2">#}
                    {#                            <label>Actividades Preventivas Cumplidas:</label>#}
                    {#                        </div>#}
                    {#                        <div class="col-md-3 ">#}
                    {##}
                    {#                            <input id="numerator_liderazgo" class="form-control" type="number"#}
                    {#                                   value="{{ values_details|get_by_key:'liderazgo' |numerator }}"/>#}
                    {#                        </div>#}
                    {##}
                    {#                        <div class="field-box">#}
                    {#                            <div class="col-md-2">#}
                    {#                                <label>Actividades Preventivas Programadas:</label>#}
                    {#                            </div>#}
                    {#                            <div class="col-md-3">#}
                    {#                                <input id="denominator_liderazgo" class="form-control" type="number"#}
                    {#                                       value="{{ values_details|get_by_key:'liderazgo'|denominator }}"/>#}
                    {#                            </div>#}
                    {#                        </div>#}
                    {#                        <div class="field-box col-md-2">#}
                    {#                            <button id="liderazgo_btn" class="btn-flat inverse">Guardar</button>#}
                    {#                        </div>#}
                    {#                    </div>#}


                    {#                    <div class="col-md-12">#}
                    {#                        <div class="col-md-7"></div>#}
                    {#                        <div class="col-md-5 data pull-right">#}
                    {#                            <span class="number" id="liderazgo_val">{{ index_detail.liderazgo }}%</span>#}
                    {#                            ILP#}
                    {#                        </div>#}
                    {#                    </div>#}

                </div>
            </div>

        {% endif %}
        {% if index.is_using_plan_contingencia %}
            <div id="main-stats" style="margin-top: 50px;">
                <div class="row stats-row stat">
                    <div class="col-md-12" style="text-align: left;">
                        <h4>
                            Indice de Actividades del plan de contingencia (>=90)
                        </h4>


                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th class="col-md-4">
                                    Actividades Preventivas Cumplidas:
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Actividades Preventivas Programadas:
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Record
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>{{ values_details|get_by_key:'plan_contingencia' |numerator }}</td>
                                <td>{{ values_details|get_by_key:'plan_contingencia'|denominator }}</td>
                                <td>{{ index_detail.plan_contingencia }}% IAPC</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                </div>
            </div>
        {% endif %}
        {% if index.is_using_mejora %}
            <div id="main-stats" style="margin-top: 50px;">
                <div class="row stats-row">
                    <div class="col-md-12">
                        <h4>
                            Índice de Mejora (>=90)
                        </h4>
                        <br>
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th class="col-md-4">
                                    Actividades de Mejoras Cumplidas:
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Actividades de Mejoras Programadas:
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Record
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>{{ values_details|get_by_key:'improvements'|numerator }}</td>
                                <td>{{ values_details|get_by_key:'improvements'|denominator }}</td>
                                <td>{{ values_details|get_by_key:'improvements'|value }}%</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        {% endif %}
        {% if index.is_using_capacitacion %}
            <div id="main-stats" style="margin-top: 50px;">
                <div class="row stats-row">
                    <div class="col-md-12">
                        <h4>
                            Índice de Capacitación (>=90)
                        </h4>
                        <br>
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th class="col-md-4">
                                    Capacitaciones Cumplidas:
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Capacitaciones Programadas:
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Record
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>{{ values_details|get_by_key:'training'|numerator }}</td>
                                <td>{{ values_details|get_by_key:'training'|denominator }}</td>
                                <td>{{ values_details|get_by_key:'training'|value }}% IC</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        {% endif %}
        {% if index.is_using_personal_capacitado %}
            <div id="main-stats" style="margin-top: 50px;">
                <div class="row stats-row">
                    <div class="col-md-12">
                        <h4>
                            Índice de Personal Capacitado (>=90)
                        </h4>
                        <br>
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th class="col-md-4">
                                    Ponderado (capacitaciones * personas en capacitacion / total de personal ):
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Total de personal en el presente mes:
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Record
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>{{ values_details|get_by_key:'personal_training'|numerator }}</td>
                                <td>{{ values_details|get_by_key:'personal_training'|denominator }}</td>
                                <td>{{ values_details|get_by_key:'personal_training'|value }}% IC</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        {% endif %}
        {% if index.is_using_intensidad_formativa %}
            <div id="main-stats" style="margin-top: 50px;">
                <div class="row stats-row">
                    <div class="col-md-12">
                        <h4>
                            Índice de Intensidad Formativa
                        </h4>
                        <br>
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th class="col-md-4">
                                    Horas sumadas de capacitaciones y charlas 'realizadas' * 100
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Total de trabajadores
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Record
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>{{ values_details|get_by_key:'formative_intensity'|numerator }}</td>
                                <td>{{ values_details|get_by_key:'formative_intensity'|denominator }}</td>
                                <td>{{ values_details|get_by_key:'formative_intensity'|value }}</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        {% endif %}
        {% if index.is_using_charlas %}
            <div id="main-stats" style="margin-top: 50px;">
                <div class="row stats-row">
                    <div class="col-md-12">
                        <h4>
                            Indice de Charlas Periodicas de Seguridad (>=90)
                        </h4>

                        <br>
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th class="col-md-4">
                                    (N° de Charlas al mes realizados x N° de Trabajadores capacitados) x 100
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    (N° de Charlas al mes programados x N° de Trabajadores programados)
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Record
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>{{ values_details|get_by_key:'security_talks'|numerator }}</td>
                                <td>{{ values_details|get_by_key:'security_talks'|denominator }}</td>
                                <td>{{ values_details|get_by_key:'security_talks'|value }}%</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        {% endif %}
        {% if index.is_using_incidentes %}
            <div id="main-stats" style="margin-top: 50px;">
                <div class="row stats-row">
                    <div class="col-md-12">
                        <h4>
                            Indice de Reporte de Incidentes (<=25)
                        </h4>
                        <br>
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th class="col-md-4">
                                    Nº Trabajadores reportaron x 100
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Nº Dias del mes
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Record
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>{{ values_details|get_by_key:'incidents'|numerator }}</td>
                                <td>{{ values_details|get_by_key:'incidents'|denominator }}</td>
                                <td>{{ values_details|get_by_key:'incidents'|value }}%</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        {% endif %}
        {% if index.is_using_inspecciones %}
            <div id="main-stats" style="margin-top: 50px;">
                <div class="row stats-row">
                    <div class="col-md-12">
                        <h4>
                            Indice de Inspecciones (>=90)
                        </h4>
                        <br>
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th class="col-md-4">
                                    Nº Inspecciones en SST realizadas x 100
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Nº Inspecciones en SST planificadas
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Record
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>{{ values_details|get_by_key:'inspections'|numerator }}</td>
                                <td>{{ values_details|get_by_key:'inspections'|denominator }}</td>
                                <td>{{ values_details|get_by_key:'inspections'|value }}%</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        {% endif %}
        {% if index.is_using_observaciones_planeadas %}
            <div id="main-stats" style="margin-top: 50px;">
                <div class="row stats-row">
                    <div class="col-md-12">
                        <h4>
                            Índice de Observaciones planeadas de trabajo (>=100)
                        </h4>
                        <br>
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th class="col-md-4">
                                    Opt realizadas x Personal Observado x 100
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Opt realizadas x Personal Previsto
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Record
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>{{ values_details|get_by_key:'observations'|numerator }}</td>
                                <td>{{ values_details|get_by_key:'observations'|denominator }}</td>
                                <td>{{ values_details|get_by_key:'observations'|value }}%</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        {% endif %}
        <!-- anual-->
        {% if index.is_using_auditorias %}
            <div id="main-stats" style="margin-top: 50px;">
                <div class="row stats-row">
                    <div class="col-md-12">
                        <h4>
                            Índice de Auditorias
                        </h4>
                        <br>
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th class="col-md-4">
                                    N° de Auditorias Ejecutadas x100
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    N° de Auditorias Programadas
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Record
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td> ???</td>
                                <td> ???</td>
                                <td> ???%</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                </div>
            </div>

        {% endif %}
        {% if index.is_using_simulacros_emergencia %}
            <div id="main-stats" style="margin-top: 50px;">
                <div class="row stats-row">
                    <div class="col-md-12">
                        <h4>
                            Índice de Simulacros de Emergencia (>=90)
                        </h4>
                        <br>
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th class="col-md-4">
                                    Nº Simulacros de Emerg. realizadas x 100
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Nº Simulacros de Emerg. Planificadas
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Record
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>{{ values_details|get_by_key:'simulacrum'|numerator }}</td>
                                <td>{{ values_details|get_by_key:'simulacrum'|denominator }}</td>
                                <td>{{ values_details|get_by_key:'simulacrum'|value }}%</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        {% endif %}
        {% if index.is_using_reconocimiento_trabajador %}
            <div id="main-stats" style="margin-top: 50px;">
                <div class="row stats-row">
                    <div class="col-md-12">
                        <h4>
                            Índice de Reconocimiento del Trabajador (>=90)
                        </h4>
                        <br>
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th class="col-md-4">
                                    Nº Reconocimientos realizados x 100
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Nº Reconocimientos planificados
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Record
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>???</td>
                                <td>???</td>
                                <td>???</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        {% endif %}
        {% if index.is_using_engenieer %}
            <div id="main-stats" style="margin-top: 50px;">
                <div class="row stats-row">
                    <div class="col-md-12">
                        <h4>
                            Índice de Disponibilidad Ingeniero SST (>=90)
                        </h4>

                        <br>
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th class="col-md-4">
                                    Horas Contratadas Ing. SST
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    N° total trabajadores
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Record
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>???</td>
                                <td>???</td>
                                <td>???</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        {% endif %}
        {% if index.is_using_first_auxi %}
            <div id="main-stats" style="margin-top: 50px;">
                <div class="row stats-row">
                    <div class="col-md-12">
                        <h4>
                            Índice de Accidentes con Primeros Auxilios (<= 10)
                        </h4>

                        <br>
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th class="col-md-4">
                                    N°Accidentes Primeros Auxilios Acum x 200 000
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Horas Hombre Trabajadas Acumuladas
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Record
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>{{ values_details|get_by_key:'first_aid'|numerator }}</td>
                                <td>{{ values_details|get_by_key:'first_aid'|denominator }}</td>
                                <td>{{ values_details|get_by_key:'first_aid'|value }}%</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        {% endif %}
        {% if index.is_using_medic_atention %}
            <div id="main-stats" style="margin-top: 50px;">
                <div class="row stats-row">
                    <div class="col-md-12">
                        <h4>
                            Índice de Accidentes con Atención Médica (<=20)
                        </h4>
                        <br>
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th class="col-md-4">
                                    N°Accidentes A. Medica Acum x 200 000
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Horas Hombre Trabajadas Acumuladas
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Record
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>{{ values_details|get_by_key:'medic_attention'|numerator }}</td>
                                <td>{{ values_details|get_by_key:'medic_attention'|denominator }}</td>
                                <td>{{ values_details|get_by_key:'medic_attention'|value }}%</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        {% endif %}

        {% if index.is_using_lose_time %}
            <div id="main-stats" style="margin-top: 50px;">
                <div class="row stats-row">
                    <div class="col-md-12">
                        <h4>
                            Índice de Accidentes con Tiempo Perdido (<=20)
                        </h4>

                        <br>
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th class="col-md-4">
                                    N°Accidentes T. Perdido Acum x 200 000
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Horas Hombre Trabajadas Acumuladas
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Record
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>{{ values_details|get_by_key:'aids_lost'|numerator }}</td>
                                <td>{{ values_details|get_by_key:'aids_lost'|denominator }}</td>
                                <td>{{ values_details|get_by_key:'aids_lost'|value }}%</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        {% endif %}
        {% if index.is_using_fatal_accident %}
            <div id="main-stats" style="margin-top: 50px;">
                <div class="row stats-row">
                    <div class="col-md-12">
                        <h4>
                            Índice de Accidentes Fatales (=0)
                        </h4>

                        <br>
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th class="col-md-4">
                                    N°Accidentes Fatales x 200 000
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Horas Hombre Trabajadas Acumuladas
                                </th>
                                <th class="col-md-4">
                                    <span class="line"></span>
                                    Record
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>{{ values_details|get_by_key:'aids_fatal'|numerator }}</td>
                                <td>{{ values_details|get_by_key:'aids_fatal'|denominator }}</td>
                                <td>{{ values_details|get_by_key:'aids_fatal'|value }}%</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        {% endif %}

        {% if index.is_using_frecuency %}
            {% include 'main/reports/hook/table.html' with title='Índice de Frecuencia (<=10)' title_numerator='N°Accidentes T. Perdido Acum x 200 000' title_denominator='Horas Hombre Trabajadas Acumuladas' value_detail=values_details|get_by_key:'frecuency' editable=False %}
        {% endif %}

        {% if index.is_using_severity %}
            {% include 'main/reports/hook/table.html' with title='Índice de Severidad (<=50)' title_numerator='N°días perdidos Acum x 200 000' title_denominator='Horas Hombre Trabajadas Acumuladas' value_detail=values_details|get_by_key:'severity' editable=True %}
        {% endif %}

        {% if index.is_using_accidentality %}
            {% include 'main/reports/hook/table.html' with title='Índice de Accidentabilidad (<= 1)' title_numerator='IF x IS' title_denominator='1000' value_detail=values_details|get_by_key:'accidentability' editable=True %}
        {% endif %}
        {% if index.is_using_professional_sick %}
            {% include 'main/reports/hook/table.html' with title='Índice de Enfermedades Profesionales (<= 5)' title_numerator='N°Enfermedades Profesionales Acum x 200 000' title_denominator='Horas Hombre Trabajadas Acumuladas' value_detail=values_details|get_by_key:'proffesional_sick' editable=True %}
        {% endif %}


        {% if index.is_using_medic_exam %}
            {% include 'main/reports/hook/table.html' with title='Índice de Examen Médico Ocupacional (100)' title_numerator='EMOs Ejecutados x 100' title_denominator='EMOs Programados.' value_detail=values_details|get_by_key:'medic_exam' editable=True %}
        {% endif %}

        {% if index.is_using_ap_worker %}
            {% include 'main/reports/hook/table.html' with title='Índice de Trabajadores Aptos' title_numerator='N° de Trabajadores Aptos x10' title_denominator='N° de Trabajadores Evaluados.' value_detail=values_details|get_by_key:'workers_up' editable=True %}
        {% endif %}

        {% if index.is_using_ap_worker_restric %}
            {% include 'main/reports/hook/table.html' with title='Índice de Trabajadores Aptos con restricción (>=90)' title_numerator='N° de Trabajadores Aptos con Restricción x100' title_denominator='N° de Trabajadores Evaluados.' value_detail=values_details|get_by_key:'workers_up_restrictions' editable=True %}
        {% endif %}
        {% if index.is_using_aq_exposition %}
            {% include 'main/reports/hook/table.html' with title='Índice de Exposición a Agentes Químicos' title_numerator='N° de Trabajadores Expuestos x100' title_denominator='N° Total de Trabajadores operacionales' value_detail=values_details|get_by_key:'expose_quimic' editable=True %}
        {% endif %}
        <!--anual-->

        {% if index.is_using_monitoring %}
            {% include 'main/reports/hook/table.html' with title='Índice de Monitoreos Ocupacionales (>=90)' title_numerator='N° de Monitoreos Cumplidos x100' title_denominator='N° de Monitoreos Programados' value_detail=values_details|get_by_key:'occupational_monitor' editable=True %}
        {% endif %}

        {% if index.is_using_medidas_control %}
            {% include 'main/reports/hook/table.html' with title='Índice de Medidas de Control Ocupacional (>=70)' title_numerator='N° de Medidas Implementadas x100' title_denominator='N° de Medidas Identificadas' value_detail=values_details|get_by_key:'measure_occupational_control' editable=True %}
        {% endif %}
    </div>


{% endblock %}
{% block scripts %}
    {#    <script src="{% static 'main/js/bootstrap.min.js' %}"></script>#}
    {#    <script src="{% static 'main/js/jquery-ui-1.10.2.custom.min.js' %}"></script>#}
    {#    <script src="{% static 'main/js/bootstrap.min.js' %}"></script>#}
    {#    <script src="{% static 'main/js/jquery-ui-1.10.2.custom.min.js' %}"></script>#}
    <!-- knob -->
    <script src="{% static 'main/js/jquery.knob.js' %}"></script>
    <!-- flot charts -->
    {#    <script src="{% static 'main/js/jquery.flot.js' %}"></script>#}
    {#    <script sr="{% static 'main/js/jquery.flot.stack.js' %}"></script>#}
    {#    <script src="{% static 'main/js/jquery.flot.resize.js' %}"></script>#}
    {#    <script src="{% static 'main/js/theme.js' %}"></script>#}
    <!-- knob -->
    <script type="text/javascript">
        // using jQuery
        function getCookie(name) {
            var cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                var cookies = document.cookie.split(';');
                for (var i = 0; i < cookies.length; i++) {
                    var cookie = jQuery.trim(cookies[i]);
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        var csrftoken = getCookie('csrftoken');

        function csrfSafeMethod(method) {
            // these HTTP methods do not require CSRF protection
            return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
        }

        $.ajaxSetup({
            beforeSend: function (xhr, settings) {
                if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                    xhr.setRequestHeader("X-CSRFToken", csrftoken);
                }
            }
        });

        $('.btn-update-index').click(function (e) {
            e.preventDefault();
            var button = $(e.target);
            button.text('actualizando ...');
            button.prop("disabled", true);

            let tr = button.parents('tr');
            let valueDetailId = tr.attr('valueDetail');

            let url = '{% url 'main:valuesdetail-detail' 0 %}';

            $.ajax({
                    url: url.replace('0', valueDetailId),
                    method: 'put',
                    data: {
                        numerator: tr.find('[name="numerator"]').val(),
                        denominator: tr.find('[name="denominator"]').val(),
                        value: tr.find('[name="value"]').val(),
                    }
                }
            )
                .done(function (response) {
                        alert('actualizado')

                    }
                )
                .fail(function () {
                    alert("error, intente luego");
                })
                .always(function () {
                    button.text('actualizar');
                    button.prop("disabled", false);
                });

        });

    </script>
{% endblock %}